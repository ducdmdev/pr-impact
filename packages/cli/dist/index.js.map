{"version":3,"sources":["../src/index.ts","../src/commands/analyze.ts","../src/commands/breaking.ts","../src/commands/risk.ts","../src/commands/impact.ts"],"sourcesContent":["import { Command } from 'commander';\nimport { registerAnalyzeCommand } from './commands/analyze.js';\nimport { registerBreakingCommand } from './commands/breaking.js';\nimport { registerRiskCommand } from './commands/risk.js';\nimport { registerImpactCommand } from './commands/impact.js';\n\nconst program = new Command();\nprogram\n  .name('pri')\n  .description('PR Impact Analyzer — detect breaking changes, map impact, score risk')\n  .version('0.1.0');\n\nregisterAnalyzeCommand(program);\nregisterBreakingCommand(program);\nregisterRiskCommand(program);\nregisterImpactCommand(program);\n\nprogram.parse();\n","import { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport { analyzePR, formatMarkdown, formatJSON } from '@pr-impact/core';\nimport { writeFile } from 'fs/promises';\nimport { resolve } from 'path';\n\nexport function registerAnalyzeCommand(program: Command): void {\n  program\n    .command('analyze')\n    .description('Run full PR impact analysis')\n    .argument('[base]', 'Base branch', undefined)\n    .argument('[head]', 'Head branch', undefined)\n    .option('--format <type>', 'Output format: md | json', 'md')\n    .option('--output <file>', 'Write to file instead of stdout')\n    .option('--repo <path>', 'Repository path', process.cwd())\n    .option('--no-breaking', 'Skip breaking change analysis')\n    .option('--no-coverage', 'Skip test coverage analysis')\n    .option('--no-docs', 'Skip doc staleness check')\n    .action(async (base, head, opts) => {\n      const spinner = ora({ text: 'Analyzing PR impact...', stream: process.stderr }).start();\n      try {\n        const analysis = await analyzePR({\n          repoPath: resolve(opts.repo),\n          baseBranch: base,\n          headBranch: head,\n          skipBreaking: opts.breaking === false,\n          skipCoverage: opts.coverage === false,\n          skipDocs: opts.docs === false,\n        });\n        spinner.stop();\n\n        const output =\n          opts.format === 'json'\n            ? formatJSON(analysis)\n            : formatMarkdown(analysis);\n\n        if (opts.output) {\n          await writeFile(resolve(opts.output), output);\n          console.log(chalk.green(`Report written to ${opts.output}`));\n        } else {\n          console.log(output);\n        }\n      } catch (err) {\n        spinner.fail('Analysis failed');\n        console.error(\n          chalk.red(err instanceof Error ? err.message : String(err)),\n        );\n        process.exit(1);\n      }\n    });\n}\n","import { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport { parseDiff, detectBreakingChanges } from '@pr-impact/core';\nimport type { BreakingChange } from '@pr-impact/core';\nimport { resolve } from 'path';\n\nconst SEVERITY_ORDER: Record<string, number> = {\n  low: 0,\n  medium: 1,\n  high: 2,\n};\n\nfunction severityColor(severity: BreakingChange['severity']): string {\n  switch (severity) {\n    case 'high':\n      return chalk.red(severity);\n    case 'medium':\n      return chalk.yellow(severity);\n    case 'low':\n      return chalk.green(severity);\n  }\n}\n\nfunction formatMarkdownTable(changes: BreakingChange[]): string {\n  const lines: string[] = [];\n  lines.push('# Breaking Changes\\n');\n  lines.push(`Found **${changes.length}** breaking change${changes.length === 1 ? '' : 's'}.\\n`);\n  lines.push('| File | Symbol | Type | Severity | Consumers |');\n  lines.push('|------|--------|------|----------|-----------|');\n\n  for (const change of changes) {\n    const consumers = change.consumers.length > 0 ? change.consumers.join(', ') : 'none';\n    lines.push(\n      `| ${change.filePath} | ${change.symbolName} | ${change.type} | ${change.severity} | ${consumers} |`,\n    );\n  }\n\n  return lines.join('\\n');\n}\n\nfunction formatText(changes: BreakingChange[]): string {\n  const lines: string[] = [];\n  lines.push(chalk.bold(`Found ${changes.length} breaking change${changes.length === 1 ? '' : 's'}:\\n`));\n\n  for (const change of changes) {\n    lines.push(\n      `  ${severityColor(change.severity)}  ${chalk.bold(change.symbolName)} (${change.type})`,\n    );\n    lines.push(`       ${chalk.dim(change.filePath)}`);\n    if (change.before) {\n      lines.push(`       ${chalk.red('- ' + change.before)}`);\n    }\n    if (change.after) {\n      lines.push(`       ${chalk.green('+ ' + change.after)}`);\n    }\n    if (change.consumers.length > 0) {\n      lines.push(`       ${chalk.dim('Consumers:')} ${change.consumers.join(', ')}`);\n    }\n    lines.push('');\n  }\n\n  return lines.join('\\n');\n}\n\nexport function registerBreakingCommand(program: Command): void {\n  program\n    .command('breaking')\n    .description('Detect breaking changes in the PR')\n    .argument('[base]', 'Base branch', undefined)\n    .argument('[head]', 'Head branch', undefined)\n    .option('--severity <level>', 'Minimum severity: low | medium | high', 'low')\n    .option('--format <type>', 'Output format: md | json', 'md')\n    .option('--repo <path>', 'Repository path', process.cwd())\n    .action(async (base, head, opts) => {\n      const spinner = ora({ text: 'Detecting breaking changes...', stream: process.stderr }).start();\n      try {\n        const repoPath = resolve(opts.repo);\n        const baseBranch = base ?? 'main';\n        const headBranch = head ?? 'HEAD';\n\n        const changedFiles = await parseDiff(repoPath, baseBranch, headBranch);\n        const allBreaking = await detectBreakingChanges(\n          repoPath,\n          baseBranch,\n          headBranch,\n          changedFiles,\n        );\n\n        const minSeverity = SEVERITY_ORDER[opts.severity] ?? 0;\n        const filtered = allBreaking.filter(\n          (change) => SEVERITY_ORDER[change.severity] >= minSeverity,\n        );\n\n        spinner.stop();\n\n        if (filtered.length === 0) {\n          console.log(\n            chalk.green('No breaking changes detected at severity >= ' + opts.severity),\n          );\n          return;\n        }\n\n        switch (opts.format) {\n          case 'json':\n            console.log(JSON.stringify(filtered, null, 2));\n            break;\n          case 'md':\n            console.log(formatMarkdownTable(filtered));\n            break;\n          default:\n            console.log(formatText(filtered));\n            break;\n        }\n\n        // Exit with code 1 if breaking changes found at the specified severity\n        process.exit(1);\n      } catch (err) {\n        spinner.fail('Breaking change detection failed');\n        console.error(\n          chalk.red(err instanceof Error ? err.message : String(err)),\n        );\n        process.exit(1);\n      }\n    });\n}\n","import { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport { analyzePR } from '@pr-impact/core';\nimport type { RiskAssessment, RiskFactor } from '@pr-impact/core';\nimport { resolve } from 'path';\n\nfunction levelColor(level: RiskAssessment['level']): (text: string) => string {\n  switch (level) {\n    case 'low':\n      return chalk.green;\n    case 'medium':\n      return chalk.yellow;\n    case 'high':\n      return chalk.red;\n    case 'critical':\n      return chalk.red.bold;\n  }\n}\n\nfunction formatFactorLine(factor: RiskFactor): string {\n  const weighted = (factor.score * factor.weight).toFixed(1);\n  const bar = '█'.repeat(Math.round(factor.score / 10)) +\n    '░'.repeat(10 - Math.round(factor.score / 10));\n  return `  ${bar}  ${factor.name.padEnd(24)} ${String(factor.score).padStart(3)}/100  (weight: ${factor.weight}, contribution: ${weighted})`;\n}\n\nfunction formatTextOutput(risk: RiskAssessment): string {\n  const colorFn = levelColor(risk.level);\n  const lines: string[] = [];\n\n  lines.push(chalk.bold('Risk Assessment'));\n  lines.push('');\n  lines.push(\n    `  Score: ${colorFn(String(risk.score) + '/100')}  Level: ${colorFn(risk.level.toUpperCase())}`,\n  );\n  lines.push('');\n\n  if (risk.factors.length > 0) {\n    lines.push(chalk.bold('Factor Breakdown'));\n    lines.push('');\n    for (const factor of risk.factors) {\n      lines.push(formatFactorLine(factor));\n      lines.push(`  ${chalk.dim(factor.description)}`);\n      if (factor.details && factor.details.length > 0) {\n        for (const detail of factor.details) {\n          lines.push(`    ${chalk.dim('- ' + detail)}`);\n        }\n      }\n      lines.push('');\n    }\n  }\n\n  return lines.join('\\n');\n}\n\nfunction formatJsonOutput(risk: RiskAssessment): string {\n  return JSON.stringify(risk, null, 2);\n}\n\nexport function registerRiskCommand(program: Command): void {\n  program\n    .command('risk')\n    .description('Calculate and display PR risk score')\n    .argument('[base]', 'Base branch', undefined)\n    .argument('[head]', 'Head branch', undefined)\n    .option('--threshold <n>', 'Fail if risk score >= threshold', parseFloat)\n    .option('--format <type>', 'Output format: text | json', 'text')\n    .option('--repo <path>', 'Repository path', process.cwd())\n    .action(async (base, head, opts) => {\n      const spinner = ora({ text: 'Calculating risk score...', stream: process.stderr }).start();\n      try {\n        const analysis = await analyzePR({\n          repoPath: resolve(opts.repo),\n          baseBranch: base,\n          headBranch: head,\n        });\n\n        spinner.stop();\n\n        const { riskScore } = analysis;\n\n        if (opts.format === 'json') {\n          console.log(formatJsonOutput(riskScore));\n        } else {\n          console.log(formatTextOutput(riskScore));\n        }\n\n        // If threshold is set and score meets or exceeds it, exit with code 1\n        if (opts.threshold !== undefined && riskScore.score >= opts.threshold) {\n          const colorFn = levelColor(riskScore.level);\n          console.log(\n            colorFn(\n              `\\nRisk score ${riskScore.score} meets or exceeds threshold ${opts.threshold}`,\n            ),\n          );\n          process.exit(1);\n        }\n      } catch (err) {\n        spinner.fail('Risk calculation failed');\n        console.error(\n          chalk.red(err instanceof Error ? err.message : String(err)),\n        );\n        process.exit(1);\n      }\n    });\n}\n","import { Command } from 'commander';\nimport chalk from 'chalk';\nimport ora from 'ora';\nimport { parseDiff, buildImpactGraph } from '@pr-impact/core';\nimport type { ImpactGraph, ImpactEdge, ChangedFile } from '@pr-impact/core';\nimport { resolve } from 'path';\n\nfunction formatTreeOutput(graph: ImpactGraph): string {\n  const lines: string[] = [];\n\n  lines.push(chalk.bold('Impact Graph'));\n  lines.push('');\n\n  if (graph.directlyChanged.length > 0) {\n    lines.push(chalk.bold('Directly Changed'));\n    for (let i = 0; i < graph.directlyChanged.length; i++) {\n      const isLast = i === graph.directlyChanged.length - 1;\n      const prefix = isLast ? '└── ' : '├── ';\n      const file = graph.directlyChanged[i];\n      const dependents = graph.edges.filter((e) => e.from === file);\n\n      lines.push(`  ${prefix}${chalk.cyan(file)}`);\n\n      if (dependents.length > 0) {\n        const indent = isLast ? '    ' : '│   ';\n        for (let j = 0; j < dependents.length; j++) {\n          const depIsLast = j === dependents.length - 1;\n          const depPrefix = depIsLast ? '└── ' : '├── ';\n          lines.push(\n            `  ${indent}${depPrefix}${chalk.dim(dependents[j].to)} ${chalk.dim('(' + dependents[j].type + ')')}`,\n          );\n        }\n      }\n    }\n  }\n\n  if (graph.indirectlyAffected.length > 0) {\n    lines.push('');\n    lines.push(chalk.bold('Indirectly Affected'));\n    for (let i = 0; i < graph.indirectlyAffected.length; i++) {\n      const isLast = i === graph.indirectlyAffected.length - 1;\n      const prefix = isLast ? '└── ' : '├── ';\n      lines.push(`  ${prefix}${chalk.yellow(graph.indirectlyAffected[i])}`);\n    }\n  }\n\n  lines.push('');\n  lines.push(\n    chalk.dim(\n      `${graph.directlyChanged.length} directly changed, ` +\n        `${graph.indirectlyAffected.length} indirectly affected, ` +\n        `${graph.edges.length} edge${graph.edges.length === 1 ? '' : 's'}`,\n    ),\n  );\n\n  return lines.join('\\n');\n}\n\nfunction formatDotOutput(graph: ImpactGraph): string {\n  const lines: string[] = [];\n  lines.push('digraph impact {');\n  lines.push('  rankdir=LR;');\n  lines.push('  node [shape=box, style=filled];');\n  lines.push('');\n\n  // Style directly changed nodes\n  for (const file of graph.directlyChanged) {\n    lines.push(`  \"${file}\" [fillcolor=\"#ff6b6b\", fontcolor=\"white\"];`);\n  }\n\n  // Style indirectly affected nodes\n  for (const file of graph.indirectlyAffected) {\n    lines.push(`  \"${file}\" [fillcolor=\"#ffd93d\"];`);\n  }\n\n  lines.push('');\n\n  // Edges\n  for (const edge of graph.edges) {\n    lines.push(`  \"${edge.from}\" -> \"${edge.to}\" [label=\"${edge.type}\"];`);\n  }\n\n  lines.push('}');\n  return lines.join('\\n');\n}\n\nfunction formatJsonOutput(graph: ImpactGraph): string {\n  return JSON.stringify(graph, null, 2);\n}\n\nexport function registerImpactCommand(program: Command): void {\n  program\n    .command('impact')\n    .description('Build and display the impact graph')\n    .argument('[file]', 'Specific file to trace impact for', undefined)\n    .option('--depth <n>', 'Max dependency depth', parseInt, 3)\n    .option('--format <type>', 'Output format: text | json | dot', 'text')\n    .option('--repo <path>', 'Repository path', process.cwd())\n    .action(async (file, opts) => {\n      const spinner = ora({ text: 'Building impact graph...', stream: process.stderr }).start();\n      try {\n        const repoPath = resolve(opts.repo);\n        const depth = opts.depth;\n\n        let changedFiles: ChangedFile[];\n\n        if (file) {\n          // When a specific file is provided, create a synthetic ChangedFile\n          changedFiles = [\n            {\n              path: file,\n              status: 'modified',\n              additions: 0,\n              deletions: 0,\n              language: '',\n              category: 'source',\n            },\n          ];\n        } else {\n          // Default: parse diff between main/master and HEAD\n          changedFiles = await parseDiff(repoPath, 'main', 'HEAD').catch(\n            () => parseDiff(repoPath, 'master', 'HEAD'),\n          );\n        }\n\n        const graph = await buildImpactGraph(repoPath, changedFiles, depth);\n\n        spinner.stop();\n\n        switch (opts.format) {\n          case 'json':\n            console.log(formatJsonOutput(graph));\n            break;\n          case 'dot':\n            console.log(formatDotOutput(graph));\n            break;\n          default:\n            console.log(formatTreeOutput(graph));\n            break;\n        }\n      } catch (err) {\n        spinner.fail('Impact graph building failed');\n        console.error(\n          chalk.red(err instanceof Error ? err.message : String(err)),\n        );\n        process.exit(1);\n      }\n    });\n}\n"],"mappings":"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","names":["program","chalk","ora","resolve","program","chalk","ora","analyzePR","resolve","program","chalk","ora","parseDiff","resolve","formatJsonOutput","program"]}